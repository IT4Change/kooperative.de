---
import { getStrapiMedia } from '@/lib/strapi';

interface GalleryImage {
  image: {
    url: string;
    alternativeText?: string;
    width?: number;
    height?: number;
  };
  caption?: string;
}

interface Props {
  images: GalleryImage[];
}

const { images } = Astro.props;
---

{images.length > 0 && (
  <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
    {images.map((item) => {
      const src = getStrapiMedia(item.image?.url);
      const alt = item.image?.alternativeText || '';
      return (
        <figure class="group">
          <a
            href={src}
            target="_blank"
            rel="noopener noreferrer"
            class="block overflow-hidden rounded-lg"
          >
            <img
              src={src}
              alt={alt}
              width={item.image?.width}
              height={item.image?.height}
              class="w-full h-48 md:h-56 object-cover transition-transform duration-300 group-hover:scale-105"
              loading="lazy"
            />
          </a>
          {item.caption && (
            <figcaption class="mt-2 text-sm text-gray-500 text-center">
              {item.caption}
            </figcaption>
          )}
        </figure>
      );
    })}
  </div>
)}
