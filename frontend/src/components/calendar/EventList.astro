---
import EventCard from './EventCard.astro';
import { getStrapiMedia } from '../../lib/strapi';

interface EventItem {
  title: string;
  slug: string;
  description: string;
  startDate: string;
  endDate?: string;
  location?: string;
  image?: { url: string };
  section?: { name: string; slug: string };
}

interface Props {
  events: EventItem[];
}

const { events } = Astro.props;
---

{events.length > 0 ? (
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {events.map((event) => (
      <EventCard
        title={event.title}
        date={event.startDate}
        endDate={event.endDate}
        location={event.location}
        description={event.description}
        image={event.image ? getStrapiMedia(event.image.url) : undefined}
        sectionName={event.section?.name}
        sectionSlug={event.section?.slug}
      />
    ))}
  </div>
) : (
  <div class="text-center py-16">
    <svg class="mx-auto w-16 h-16 text-gray-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
    </svg>
    <p class="text-gray-500 text-lg">Keine Veranstaltungen gefunden</p>
  </div>
)}
